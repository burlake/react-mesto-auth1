{"ast":null,"code":"import{useContext,useEffect}from\"react\";import PopupWithForm from\"../PopupWithForm/PopupWithForm.jsx\";import CurrentUserContext from\"../../contexts/CurrentUserContext.js\";import useFormValidation from\"../../utils/useFormValidation.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(_ref){var open=_ref.open,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser;var currentUser=useContext(CurrentUserContext);var _useFormValidation=useFormValidation(),values=_useFormValidation.values,errors=_useFormValidation.errors,isValid=_useFormValidation.isValid,isInputValid=_useFormValidation.isInputValid,handleChange=_useFormValidation.handleChange,reset=_useFormValidation.reset,setValue=_useFormValidation.setValue;useEffect(function(){setValue(\"name\",currentUser.name);setValue(\"about\",currentUser.about);},[currentUser,setValue]);function resetForPopup(){onClose();reset({name:currentUser.name,about:currentUser.about});}function handleSubmit(event){event.preventDefault();onUpdateUser({name:values.name,about:values.about},reset);}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"popup_type_edit\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",formButton:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",open:open,onClose:resetForPopup,isValid:isValid//нет синхронности в обработке инпутов, как следствие отправить форму можно с некорректными данными - откладываю\n,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{required:\"\",id:\"input-name\",className:\"form__subtitle form__subtitle_text_name \".concat(isInputValid.name===undefined||isInputValid.name?'':'form__subtitle__invalid'),type:\"text\",name:\"name\",placeholder:\"\\u0418\\u043C\\u044F\",minLength:2,maxLength:40,onChange:handleChange,value:values.name?values.name:''}),/*#__PURE__*/_jsx(\"span\",{id:\"input-name-error\",className:\"error-message\",children:errors.name}),/*#__PURE__*/_jsx(\"input\",{required:\"\",id:\"input-occupation\",className:\"form__subtitle form__subtitle_text_job \".concat(isInputValid.about===undefined||isInputValid.about?'':'form__subtitle__invalid'),type:\"text\",name:\"about\",placeholder:\"\\u0417\\u0430\\u043D\\u044F\\u0442\\u0438\\u0435\",minLength:2,maxLength:200,onChange:handleChange,value:values.about?values.about:''}),/*#__PURE__*/_jsx(\"span\",{id:\"input-occupation-error\",className:\"error-message\",children:errors.about})]});}export default EditProfilePopup;","map":{"version":3,"names":["useContext","useEffect","PopupWithForm","CurrentUserContext","useFormValidation","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","_ref","open","onClose","onUpdateUser","currentUser","_useFormValidation","values","errors","isValid","isInputValid","handleChange","reset","setValue","name","about","resetForPopup","handleSubmit","event","preventDefault","title","formButton","onSubmit","children","required","id","className","concat","undefined","type","placeholder","minLength","maxLength","onChange","value"],"sources":["/Users/elizavetaburlakova/Desktop/dev/mesto-react/src/components/EditProfilePopup/EditProfilePopup.jsx"],"sourcesContent":["import { useContext, useEffect } from \"react\";\nimport PopupWithForm from \"../PopupWithForm/PopupWithForm.jsx\";\nimport CurrentUserContext from \"../../contexts/CurrentUserContext.js\";\nimport useFormValidation from \"../../utils/useFormValidation.js\";\n\nfunction EditProfilePopup({open, onClose, onUpdateUser}) {\n    const currentUser = useContext(CurrentUserContext)\n    const {values, errors, isValid, isInputValid, handleChange, reset, setValue } = useFormValidation()\n\n    useEffect(() => {\n        setValue(\"name\", currentUser.name)\n        setValue(\"about\", currentUser.about)\n    },[currentUser, setValue])\n\n    function resetForPopup() {\n        onClose()\n        reset({ name:  currentUser.name, about: currentUser.about })\n    }\n\n    function handleSubmit (event) {\n        event.preventDefault()\n        onUpdateUser({name: values.name, about: values.about}, reset)\n    }\n\n  return (\n    <PopupWithForm \n      name=\"popup_type_edit\"\n      title=\"Редактировать профиль\"\n      formButton=\"Сохранить\"\n      open={open}\n      onClose={resetForPopup}\n      isValid={isValid} //нет синхронности в обработке инпутов, как следствие отправить форму можно с некорректными данными - откладываю\n      onSubmit={handleSubmit}\n    >\n      <input\n        required=\"\"\n        id=\"input-name\"\n        className={`form__subtitle form__subtitle_text_name ${isInputValid.name === undefined || isInputValid.name ? '' : 'form__subtitle__invalid'}`}\n        type=\"text\"\n        name=\"name\"\n        placeholder=\"Имя\"\n        minLength={2}\n        maxLength={40}\n        onChange={handleChange}\n        value={values.name ? values.name : ''}\n      />\n      <span id=\"input-name-error\" className=\"error-message\">{errors.name}</span>\n      <input\n        required=\"\"\n        id=\"input-occupation\"\n        className={`form__subtitle form__subtitle_text_job ${isInputValid.about === undefined || isInputValid.about ? '' : 'form__subtitle__invalid'}`}\n        type=\"text\"\n        name=\"about\"\n        placeholder=\"Занятие\"\n        minLength={2}\n        maxLength={200}\n        onChange={handleChange}\n        value={values.about ? values.about : ''}\n      />\n      <span id=\"input-occupation-error\" className=\"error-message\">{errors.about}</span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}